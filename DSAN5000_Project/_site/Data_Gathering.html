<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DSAN5000_Project - Data Gathering</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DSAN5000_Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/anly501/dsan-5000-project-jtjt427/tree/main/codes" rel="" target="">
 <span class="menu-text">Code</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Data.html" rel="" target="">
 <span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Introduction.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Data_Gathering.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data Gathering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Cleaning.html" rel="" target="">
 <span class="menu-text">Data Cleaning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Data_Exploration.html" rel="" target="">
 <span class="menu-text">Data Exploration</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Clustering.html" rel="" target="">
 <span class="menu-text">Clustering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Dimensionality_Reduction.html" rel="" target="">
 <span class="menu-text">Dimensionality Reduction</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-decision-trees" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Decision Trees</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-decision-trees">    
        <li>
    <a class="dropdown-item" href="./Classification.html" rel="" target="">
 <span class="dropdown-text">Classification</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Regression.html" rel="" target="">
 <span class="dropdown-text">Regression</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./ARM.html" rel="" target="">
 <span class="menu-text">ARM</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Conclusions.html" rel="" target="">
 <span class="menu-text">Conclusions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Naive_Bayes.html" rel="" target="">
 <span class="menu-text">Naive_Bayes</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#wildfire-statitics" id="toc-wildfire-statitics" class="nav-link active" data-scroll-target="#wildfire-statitics">Wildfire Statitics</a>
  <ul class="collapse">
  <li><a href="#data-source" id="toc-data-source" class="nav-link" data-scroll-target="#data-source">Data Source</a></li>
  <li><a href="#gathering-method" id="toc-gathering-method" class="nav-link" data-scroll-target="#gathering-method">Gathering Method</a></li>
  <li><a href="#data-description" id="toc-data-description" class="nav-link" data-scroll-target="#data-description">Data Description</a></li>
  </ul></li>
  <li><a href="#california-wildfire-statistics" id="toc-california-wildfire-statistics" class="nav-link" data-scroll-target="#california-wildfire-statistics">California Wildfire Statistics</a>
  <ul class="collapse">
  <li><a href="#data-source-1" id="toc-data-source-1" class="nav-link" data-scroll-target="#data-source-1">Data Source</a></li>
  <li><a href="#gathering-method-1" id="toc-gathering-method-1" class="nav-link" data-scroll-target="#gathering-method-1">Gathering Method</a></li>
  <li><a href="#data-description-1" id="toc-data-description-1" class="nav-link" data-scroll-target="#data-description-1">Data Description</a></li>
  </ul></li>
  <li><a href="#california-weather-data" id="toc-california-weather-data" class="nav-link" data-scroll-target="#california-weather-data">California Weather Data</a>
  <ul class="collapse">
  <li><a href="#data-source-2" id="toc-data-source-2" class="nav-link" data-scroll-target="#data-source-2">Data Source</a></li>
  <li><a href="#gathering-method-2" id="toc-gathering-method-2" class="nav-link" data-scroll-target="#gathering-method-2">Gathering Method</a></li>
  <li><a href="#data-description-2" id="toc-data-description-2" class="nav-link" data-scroll-target="#data-description-2">Data Description</a></li>
  </ul></li>
  <li><a href="#articles-on-wildfire-prevention" id="toc-articles-on-wildfire-prevention" class="nav-link" data-scroll-target="#articles-on-wildfire-prevention">Articles on Wildfire Prevention</a>
  <ul class="collapse">
  <li><a href="#data-source-3" id="toc-data-source-3" class="nav-link" data-scroll-target="#data-source-3">Data Source</a></li>
  <li><a href="#gathering-method-3" id="toc-gathering-method-3" class="nav-link" data-scroll-target="#gathering-method-3">Gathering Method</a></li>
  <li><a href="#data-description-3" id="toc-data-description-3" class="nav-link" data-scroll-target="#data-description-3">Data Description</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Gathering</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="wildfire-statitics" class="level2">
<h2 class="anchored" data-anchor-id="wildfire-statitics">Wildfire Statitics</h2>
<section id="data-source" class="level3">
<h3 class="anchored" data-anchor-id="data-source">Data Source</h3>
<p>The National Interagency Fire Center (NIFC)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, established in 1965, is a pivotal institution in the United States responsible for coordinating and supporting wildfire management, suppression efforts, and wildland fire prevention initiatives. The NIFC’s work is of paramount importance in the United States due to the increasing frequency and severity of wildfires. It serves as a critical hub for wildfire information, resource coordination, and expertise, contributing to the safety of communities and the protection of natural resources.</p>
</section>
<section id="gathering-method" class="level3">
<h3 class="anchored" data-anchor-id="gathering-method">Gathering Method</h3>
<p>To obtain the data from NIFC, I followed these steps:</p>
<ol type="1">
<li><strong>Access Permission</strong>: visited the NIFC website (https://www.nifc.gov/) to review their data sharing policies and ensure compliance with their terms of use.</li>
<li><strong>Data Download</strong>: accessed the datasets directly from the NIFC’s data repository, which provides downloadable CSV files for public use.</li>
<li><strong>Data Storage</strong>: The downloaded data files were securely stored in the project’s data repository for further analysis and processing.</li>
</ol>
</section>
<section id="data-description" class="level3">
<h3 class="anchored" data-anchor-id="data-description">Data Description</h3>
<p>We utilize the following datasets obtained from the NIFC for the analysis:</p>
<ul>
<li><strong>HumanCausedAcres.csv</strong>
<ul>
<li>This dataset contains information about the total acreage affected by human-caused wildfires.</li>
<li>Key columns: <code>Year</code>, <code>Northern California</code>,<code>Southern California</code>, <code>Total</code> <img src="images/2023-10-04-17-57-04.png" class="img-fluid"></li>
</ul></li>
<li><strong>HumanCausedFires.csv</strong>
<ul>
<li>Complementary to the HumanCausedAcres dataset, this file provides details about individual human-caused wildfires.</li>
<li>Key columns: <code>Year</code>, <code>Northern California</code>,<code>Southern California</code>, <code>Total</code> <img src="images/2023-10-04-18-12-29.png" class="img-fluid"></li>
</ul></li>
<li><strong>LighteningAcres.csv</strong>
<ul>
<li>This dataset contains information on the acreage affected by wildfires caused by lightning strikes.</li>
<li>Key columns: <code>Year</code>, <code>Northern California</code>,<code>Southern California</code>, <code>Total</code> <img src="images/2023-10-04-18-14-43.png" class="img-fluid"></li>
</ul></li>
<li><strong>LightningFires.csv</strong>
<ul>
<li>Complementary to the LightningAcres dataset, this dataset provides detailed information about individual lightning-caused wildfires.</li>
<li>Key Columns: <code>Year</code>, <code>Northern California</code>,<code>Southern California</code>, <code>Total</code> <img src="images/2023-10-04-18-16-36.png" class="img-fluid"></li>
</ul></li>
<li><strong>SuppCosts.csv</strong>
<ul>
<li>This dataset contains information about the costs associated with wildfire suppression efforts.</li>
<li>Key Columns: <code>Year</code>, <code>Fires</code>,<code>Acres</code>, <code>Total</code> <img src="images/2023-10-04-18-18-05.png" class="img-fluid"></li>
</ul></li>
</ul>
<hr>
</section>
</section>
<section id="california-wildfire-statistics" class="level2">
<h2 class="anchored" data-anchor-id="california-wildfire-statistics">California Wildfire Statistics</h2>
<section id="data-source-1" class="level3">
<h3 class="anchored" data-anchor-id="data-source-1">Data Source</h3>
<p>The California Department of Forestry and Fire Protection (CAL FIRE)<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> is the primary source of wildfire data for the state of California. CAL FIRE plays a critical role in wildfire management, suppression efforts, and public safety. Their data is essential for understanding and mitigating the impact of wildfires on California’s communities and natural resources.</p>
</section>
<section id="gathering-method-1" class="level3">
<h3 class="anchored" data-anchor-id="gathering-method-1">Gathering Method</h3>
<p>To acquire the wildfire data from CAL FIRE, the following steps were taken:</p>
<ol type="1">
<li><p><strong>Access Permission</strong>: visited the CAL FIRE website to review their data sharing policies and ensure compliance with their terms of use.</p></li>
<li><p><strong>Data Collection</strong>: The datasets were obtained directly from CAL FIRE’s data repository. CAL FIRE provides accessible and downloadable data files, making it a valuable resource for wildfire-related information.</p></li>
<li><p><strong>Data Storage</strong>: The downloaded data files were securely stored in the project’s data repository, ready for further analysis and processing.</p></li>
</ol>
</section>
<section id="data-description-1" class="level3">
<h3 class="anchored" data-anchor-id="data-description-1">Data Description</h3>
<p>The datasets used for this analysis is sourced from CAL FIRE and provides information on large wildfires (greater than 300 acres) in California for the year 2020, 2017, 2015, 2014 and 2010. The datasets includes the following key columns:</p>
<ul>
<li><code>Incident #</code>: A unique identifier for each wildfire incident.</li>
<li><code>County</code>: The county in California where the wildfire occurred.</li>
<li><code>FireName</code>: The name assigned to the wildfire.</li>
<li><code>StartDate</code>: The date when the wildfire started.</li>
<li><code>EndDate</code>: The date when the wildfire was extinguished.</li>
<li><code>Acres Burned</code>: The total acreage affected by the wildfire.</li>
<li><code>VegType</code>: The type of vegetation involved in the wildfire.</li>
<li><code>Cause</code>: The cause of the wildfire.</li>
<li><code>StructureDest.</code>: The number of structures destroyed due to the wildfire.</li>
<li><code>StructureDam.</code>: The number of structures damaged due to the wildfire.</li>
<li><code>FirePersonnelDeath</code>: The number of firefighting personnel deaths associated with the wildfire.</li>
<li><code>CivilDeath</code>: The number of civilian deaths related to the wildfire.</li>
</ul>
<p><img src="images/images/2023-10-05-23-26-02.png.png" class="img-fluid"></p>
<p>This dataset provides valuable insights into wildfires in California, including their locations, sizes, causes, and impact on structures and lives. It serves as a fundamental resource for understanding the climate influence on wildfires in California.</p>
</section>
</section>
<section id="california-weather-data" class="level2">
<h2 class="anchored" data-anchor-id="california-weather-data">California Weather Data</h2>
<section id="data-source-2" class="level3">
<h3 class="anchored" data-anchor-id="data-source-2">Data Source</h3>
<p>The weather data for California was obtained from the Visual Crossing Weather API<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. Visual Crossing Weather is a weather data service that provides historical weather information, including temperature, precipitation, wind, and other meteorological data. This data source was chosen to gather historical weather data for the analysis of its potential correlation with wildfire incidents.</p>
</section>
<section id="gathering-method-2" class="level3">
<h3 class="anchored" data-anchor-id="gathering-method-2">Gathering Method</h3>
<p>To obtain historical weather data for California, the following steps were followed:</p>
<ol type="1">
<li><strong>Access Permission</strong>: The Visual Crossing Weather API was accessed to review their data sharing policies and ensure compliance with their terms of use.</li>
<li><strong>Data Retrieval</strong>: A Python script using the <code>requests</code> library was utilized to send a GET request to the Visual Crossing Weather API. The API endpoint was configured to retrieve weather data for California for specific date ranges.</li>
<li><strong>Data Conversion</strong>: The API response, received in JSON format, was parsed to extract the weather data. The JSON data was converted into a Pandas DataFrame for easier analysis.</li>
<li><strong>Data Storage</strong>: The resulting weather data for California in each year was stored in separate CSV files. These files were securely saved in the project’s data repository for further analysis and integration into the project.</li>
</ol>
</section>
<section id="data-description-2" class="level3">
<h3 class="anchored" data-anchor-id="data-description-2">Data Description</h3>
<p>Weather data was gathered for the following years: 2020, 2017, 2015, 2014, 2010, and 2001. The data includes various meteorological parameters for each day in the specified years. Below is a description of the common columns present in the weather datasets, represented here using data from the “Cali_2020.csv” dataset as an example:</p>
<ul>
<li><code>datetime</code>: The date of the recorded data.</li>
<li><code>datetimeEpoch</code>: The Unix epoch timestamp corresponding to the date.</li>
<li><code>tempmax</code>: The maximum temperature in Celsius for the day.</li>
<li><code>tempmin</code>: The minimum temperature in Celsius for the day.</li>
<li><code>temp</code>: The average temperature in Celsius for the day.</li>
<li><code>feelslikemax</code>: The maximum “feels like” temperature in Celsius for the day.</li>
<li><code>feelslikemin</code>: The minimum “feels like” temperature in Celsius for the day.</li>
<li><code>feelslike</code>: The average “feels like” temperature in Celsius for the day.</li>
<li><code>dew</code>: Dew point temperature in Celsius.</li>
<li><code>humidity</code>: Relative humidity as a percentage.</li>
<li><code>precip</code>: Total precipitation in millimeters.</li>
<li><code>precipprob</code>: Probability of precipitation as a percentage.</li>
</ul>
<p>The datasets also include additional columns providing information on various weather-related parameters, such as wind speed, cloud cover, and sunrise/sunset times, among others.</p>
<p><img src="images/2023-10-04-18-36-33.png" class="img-fluid"></p>
<p>These weather datasets will be used to analyze weather patterns and their potential impact on wildfire incidents in California as part of the project’s data analysis and modeling efforts.</p>
</section>
</section>
<section id="articles-on-wildfire-prevention" class="level2">
<h2 class="anchored" data-anchor-id="articles-on-wildfire-prevention">Articles on Wildfire Prevention</h2>
<section id="data-source-3" class="level3">
<h3 class="anchored" data-anchor-id="data-source-3">Data Source</h3>
<p>The articles data on wildfire prevention was obtained from the News API<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. News API is a service that provides access to a wide range of news articles from various sources, including news websites and publications. This data source was chosen to gather news articles related to wildfire prevention for analysis and research purposes.</p>
</section>
<section id="gathering-method-3" class="level3">
<h3 class="anchored" data-anchor-id="gathering-method-3">Gathering Method</h3>
<p>To obtain news articles on wildfire prevention, the following steps were followed:</p>
<ol type="1">
<li><strong>API Access</strong>: An API key from News API was obtained, which allowed access to their news article database.</li>
<li><strong>API Request</strong>: A Python script was used to send an HTTP GET request to the News API endpoint. The request included parameters such as the API key, the topic “wildfire prevention,” and sorting by relevancy.</li>
<li><strong>Response Parsing</strong>: The API response, received as JSON data, was parsed using the <code>jsonlite</code> library in R. This transformed the JSON data into a structured format for further analysis.</li>
<li><strong>Data Storage</strong>: The extracted news articles were saved in a JSON file named “articles.json” for subsequent data processing and analysis.</li>
</ol>
</section>
<section id="data-description-3" class="level3">
<h3 class="anchored" data-anchor-id="data-description-3">Data Description</h3>
<p>The dataset consists of news articles related to wildfire prevention. Each article includes the following information:</p>
<ul>
<li><code>source</code>: Information about the source of the article, including its name and ID.</li>
<li><code>author</code>: The author(s) of the article.</li>
<li><code>title</code>: The title of the article.</li>
<li><code>description</code>: A brief description or summary of the article.</li>
<li><code>url</code>: The URL where the full article can be accessed.</li>
<li><code>urlToImage</code>: An image associated with the article.</li>
<li><code>publishedAt</code>: The date and time when the article was published.</li>
<li><code>content</code>: The full content of the article.</li>
</ul>
<p>The articles cover various aspects of wildfire prevention, including strategies, initiatives, and insights on combating wildfires. This dataset will be used for text analysis and exploration of wildfire prevention topics as part of the project’s research and analysis efforts.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>National Interagency Fire Center - <a href="https://www.nifc.gov">Link</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>California Department of Forestry and Fire Protection - <a href="https://www.fire.ca.gov/">Link</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Visual Crossing Weather API - <a href="https://weather.visualcrossing.com">Link</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>News API - <a href="https://newsapi.org">Link</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>